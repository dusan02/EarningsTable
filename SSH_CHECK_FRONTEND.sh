#!/bin/bash
# Check frontend and API integration

cd /srv/EarningsTable && echo "=== 1. Check if simple-dashboard.html exists ===" && ls -lh simple-dashboard.html 2>/dev/null || echo "âŒ simple-dashboard.html not found" && echo "" && echo "=== 2. Test root endpoint (/) ===" && curl -s http://localhost:5555/ | head -50 | grep -E "Earnings Table|fetchData|api/final-report" || echo "Could not find frontend elements" && echo "" && echo "=== 3. Test API response structure (check if data array exists) ===" && curl -s http://localhost:5555/api/final-report | jq -r '.data | length' 2>/dev/null || echo "Could not parse API response" && echo "" && echo "=== 4. Check API response - first company structure ===" && curl -s http://localhost:5555/api/final-report | jq -r '.data[0] | keys' 2>/dev/null || echo "Could not parse first company" && echo "" && echo "=== 5. Check if frontend file contains fetchData function ===" && grep -c "fetchData" simple-dashboard.html 2>/dev/null || echo "fetchData not found in frontend" && echo "" && echo "=== 6. Check server logs for frontend requests ===" && journalctl -u earnings-table -n 30 --no-pager | grep -E "GET /|GET /dashboard" | tail -5 || echo "No frontend requests found"

